import { ComponentPreview, PropsTable, CodeBlock } from '@/docs/components'
import { Button, ToastProvider, ToastRoot, ToastContent, ToastTitle, ToastDescription, ToastAction, ToastClose, useToastManager, toastManager } from '@radenadri/void-ui'

# Toast

A succinct message that is displayed temporarily. Built on Base UI Toast.

## Preview

<ComponentPreview
  code={`import { Button, toastManager } from '@radenadri/void-ui'

function ToastDemo() {
  return (
    <Button
      onClick={() => {
        toastManager.add({
          title: 'Event Created',
          description: 'Your event has been scheduled.',
        })
      }}
    >
      Show Toast
    </Button>
  )
}`}
>
  <Button onClick={() => toastManager.add({ title: 'Event Created', description: 'Your event has been scheduled.' })}>
    Show Toast
  </Button>
</ComponentPreview>

## Installation

<CodeBlock
  code={`import {
  ToastProvider,
  ToastRoot,
  ToastContent,
  ToastTitle,
  ToastDescription,
  ToastAction,
  ToastClose,
  useToastManager,
  toastManager,
} from '@radenadri/void-ui'`}
  language="tsx"
/>

## Setup

Wrap your app with `ToastProvider`:

<CodeBlock
  code={`import { ToastProvider } from '@radenadri/void-ui'

function App() {
  return (
    <ToastProvider>
      {/* Your app content */}
    </ToastProvider>
  )
}`}
  language="tsx"
/>

## Usage

### Using useToastManager Hook

Use inside React components:

<CodeBlock
  code={`import { useToastManager, Button } from '@radenadri/void-ui'

function MyComponent() {
  const toastManager = useToastManager()

  const showToast = () => {
    toastManager.add({
      title: 'Success',
      description: 'Your changes have been saved.',
    })
  }

  return <Button onClick={showToast}>Save</Button>
}`}
  language="tsx"
/>

### Using Global toastManager

Use outside React tree (e.g., in utility functions):

<CodeBlock
  code={`import { toastManager } from '@radenadri/void-ui'

// Can be called from anywhere
export function showSuccessToast() {
  toastManager.add({
    title: 'Success',
    description: 'Operation completed.',
    type: 'success',
  })
}`}
  language="tsx"
/>

### With Action Button

<CodeBlock
  code={`toastManager.add({
  title: 'File deleted',
  description: 'The file has been moved to trash.',
  actionProps: {
    children: 'Undo',
    onClick: () => console.log('Undo clicked'),
  },
})`}
  language="tsx"
/>

### With Custom Type

<CodeBlock
  code={`toastManager.add({
  title: 'Error',
  description: 'Something went wrong.',
  type: 'error',
})

// Then style based on type in your toast renderer
<ToastRoot className={toast.type === 'error' ? 'border-red-500' : ''}>
  ...
</ToastRoot>`}
  language="tsx"
/>

### Promise Toast

<CodeBlock
  code={`const saveData = async () => {
  await toastManager.promise(
    fetch('/api/save'),
    {
      loading: { title: 'Saving...', description: 'Please wait' },
      success: { title: 'Saved!', description: 'Your data is safe' },
      error: { title: 'Error', description: 'Failed to save' },
    }
  )
}`}
  language="tsx"
/>

### Custom Toast Renderer

<CodeBlock
  code={`import {
  ToastProvider,
  ToastRoot,
  ToastContent,
  ToastTitle,
  ToastDescription,
  ToastAction,
  ToastClose,
  useToastManager,
} from '@radenadri/void-ui'

function App() {
  return (
    <ToastProvider>
      <MyApp />
      <ToastRenderer />
    </ToastProvider>
  )
}

function ToastRenderer() {
  const { toasts } = useToastManager()

  return toasts.map((toast) => (
    <ToastRoot key={toast.id} toast={toast}>
      <ToastContent>
        <ToastTitle>{toast.title}</ToastTitle>
        <ToastDescription>{toast.description}</ToastDescription>
        {toast.actionProps && (
          <ToastAction {...toast.actionProps} />
        )}
      </ToastContent>
      <ToastClose />
    </ToastRoot>
  ))
}`}
  language="tsx"
/>

## API Reference

### ToastProvider

Wraps your app and provides toast context.

### useToastManager

Hook to access toast manager inside React components.

<PropsTable
  props={[
    {
      name: 'toasts',
      type: 'ToastObject[]',
      description: 'Array of current toasts.',
    },
    {
      name: 'add',
      type: '(options) => string',
      description: 'Add a toast, returns toast ID.',
    },
    {
      name: 'close',
      type: '(id: string) => void',
      description: 'Close a toast by ID.',
    },
    {
      name: 'update',
      type: '(id: string, options) => void',
      description: 'Update a toast.',
    },
    {
      name: 'promise',
      type: '(promise, options) => Promise',
      description: 'Create loading/success/error toast.',
    },
  ]}
/>

### add() Options

<PropsTable
  props={[
    {
      name: 'title',
      type: 'ReactNode',
      description: 'Toast title.',
    },
    {
      name: 'description',
      type: 'ReactNode',
      description: 'Toast description.',
    },
    {
      name: 'type',
      type: 'string',
      description: 'Custom type for styling.',
    },
    {
      name: 'timeout',
      type: 'number',
      description: 'Auto-dismiss duration (ms).',
    },
    {
      name: 'priority',
      type: "'low' | 'high'",
      default: "'low'",
      description: 'Announcement priority.',
    },
    {
      name: 'actionProps',
      type: 'ButtonProps',
      description: 'Props for action button.',
    },
  ]}
/>

### Components

- **ToastRoot** - Container for a single toast
- **ToastContent** - Wraps title/description (handles overflow)
- **ToastTitle** - Toast heading
- **ToastDescription** - Toast body text
- **ToastAction** - Action button
- **ToastClose** - Close button
